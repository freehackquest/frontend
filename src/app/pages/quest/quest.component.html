<div *ngIf="errorMessage != null" class="alert alert-danger">
  {{ errorMessage }}
  <br>
  Try open <a class="btn btn-link" routerLink="/quests" l10nTranslate>quests</a>
</div>

<div *ngIf="errorMessage == null">
  <h1>{{ quest.name }} (+{{ quest.score }})</h1>
  <a class="btn btn-link" routerLink="/quests" l10nTranslate>quests</a> /
  <a class="btn btn-link" routerLink="/game/{{ game.id }}">{{ game.title }}</a> /
  <a class="btn btn-link" routerLink="/quests-by-subject/{{ quest.subject }}">{{ quest.subject }}</a> / 
  <a class="btn btn-link" href="/quest/{{ quest.id }}">Quest {{ quest.id }} : {{ quest.name }} (+{{ quest.score }}) </a> 
  <div *ngIf="quest.completed === true" class="card-subtitle mb-2 text-muted d-inline"> (Задача завершена) </div>
</div>
<div *ngIf="errorMessage == null" class="ya-share2" 
  data-services="collections,vkontakte,facebook,odnoklassniki,moimir,twitter,blogger,delicious,digg,reddit,evernote,linkedin,lj,pocket,qzone,renren,sinaWeibo,surfingbird,tencentWeibo,tumblr,viber,whatsapp,skype,telegram"></div>

<hr *ngIf="errorMessage == null">
<div *ngIf="errorMessage == null">
  <div class="row">
    <div class="col">
      <strong l10nTranslate>quest_name</strong>: <label> {{ quest.name }}</label>
    </div>
    <div class="col">
      <strong l10nTranslate>quest_subject</strong>: <label> {{ quest.subject }}</label>
    </div>
    <div class="col">
      <strong l10nTranslate>quest_score</strong>: <label> +{{ quest.score }}</label>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <strong l10nTranslate>quest_status</strong>: 
      <label *ngIf="quest.completed === true"> решена ({{ quest.dt_passed }})</label>
      <label *ngIf="quest.completed === false"> не решена</label>
    </div>
    <div class="col">
      <strong l10nTranslate>quest_state</strong>: <label l10nTranslate>quest_{{ quest.state }}</label>
    </div>
    <div class="col">
      <strong l10nTranslate>author</strong>: <label> {{ quest.author }}</label>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <strong l10nTranslate>copyright</strong>: <label> {{ quest.copyright }}</label>
    </div>
    <div class="col">
      <strong l10nTranslate>solved</strong>: <label>{{ quest.count_user_solved }} users</label>
    </div>
    <div class="col">
        <div class="btn btn-danger" (click)="openDialogFeedback()" l10nTranslate>report_about_bug</div>
    </div>
  </div>
  <hr>
  <div [innerHtml]="questDescription"></div>
</div>

<div *ngIf="questFiles.length > 0">
  <table class="table">
    <thead>
      <tr>
        <th l10nTranslate>filename</th>
        <th l10nTranslate>filesize</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let qf of questFiles">
        <td><a target="_blank" href="{{ qf.filepath }}" class="btn btn-link">{{ qf.filename }}</a></td>
        <td>{{ qf.size }} bytes</td>
      </tr>
    </tbody>
  </table>
</div>

<br *ngIf="errorMessage == null"/>

<div class="card" *ngIf="questHints.length > 0">
  <div class="card-header">
    <div class="btn btn-link" (click)="switchShowHints()">
      <div class="d-inline-block btn-link" l10nTranslate>quest_hints</div>
      ({{ questHints.length }})
    </div>
  </div>
  <div class="card-body" *ngIf="showHints == true">
    <table class="table table-hover">
      <thead>
        <tr>
          <th>Hint</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let qh of questHints">
          <td>{{ qh.text }}</td>
        </tr>
      </tbody>
    </table>
  </div>
</div>
<br/>

<div *ngIf="quest.completed !== true && errorMessage == null">
  <hr/>
  <div class="form-group">
    <label l10nTranslate>quest_answer</label>
    <input type="text" class="form-control" />
    <p class="form-text text-muted">
      <label l10nTranslate>quest_answer_format</label>:
      {{ quest.answer_format }}
    </p>
  </div>
  <div class="btn btn-primary" l10nTranslate>quest_check_answer</div>
</div>